<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Calendar with Task Management</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-image: url('https://example.com/your-background-image.jpg'); /* Replace with your image URL */
            background-size: cover;
            color: #333;
        }
        .container {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white background */
        }
        .calendar, .todo-list {
            border: 1px solid #ccc;
            padding: 20px;
            width: 40%;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .calendar table {
            width: 100%;
            border-collapse: collapse;
        }
        .calendar th, .calendar td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        .calendar th {
            background-color: #007BFF;
            color: #fff;
        }
        .calendar td {
            cursor: pointer;
        }
        .calendar td.today {
            background-color: #50C878; /* A pleasant green background for today's date */
            color: #fff;
        }
        .todo-list ul {
            list-style: none;
            padding: 0;
        }
        .todo-list ul li {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        input[type="text"] {
            width: calc(100% - 22px);
            padding: 10px;
            margin-top: 10px;
        }
        button {
            padding: 5px 10px;
            margin-left: 5px;
            border: none;
            background-color: #007BFF; /* Blue background for buttons */
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }
        #current-time {
            text-align: center;
            font-size: 16px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="calendar">
            <h2>Calendar</h2>
            <table id="calendar">
                <!-- Calendar will be generated by JavaScript -->
            </table>
        </div>
        <div class="todo-list">
            <h2>To-do List for <span id="date-display">Select a date</span></h2>
            <input type="text" id="new-task" placeholder="Add new task..." onkeypress="addTask(event)">
            <ul id="tasks">
                <!-- Tasks will go here -->
            </ul>
        </div>
    </div>
    <div id="current-time"></div>
    <script>
        const tasks = {}; // Object to store tasks for each date

        function generateCalendar() {
            const now = new Date();
            const monthDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            const year = now.getFullYear();
            const month = now.getMonth();

            // Check for leap year
            const isLeap = (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0));
            if (isLeap) {
                monthDays[1] = 29; // February gets an extra day if it's a leap year
            }

            let firstDay = new Date(year, month, 1);
            let startingDay = firstDay.getDay(); // Day of week the month starts on

            let calendarTable = '<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr><tr>';

            // Fill the empty slots before the first day of the month
            for (let i = 0; i < startingDay; i++) {
                calendarTable += '<td></td>';
            }

            // Fill the calendar with the actual days
            for (let day = 1; day <= monthDays[month]; day++) {
                let formattedDate = `${year}-${month + 1}-${day}`;
                let className = (day === now.getDate() && month === now.getMonth() && year === now.getFullYear()) ? 'class="today"' : '';
                calendarTable += `<td ${className} onclick="selectDate('${formattedDate}')">${day}</td>`;
                if ((day + startingDay) % 7 === 0) { // Wrap to the next row on reaching Sunday
                    calendarTable += '</tr><tr>';
                }
            }
            // Close any open table row tags
            if ((monthDays[month] + startingDay) % 7 !== 0) {
                calendarTable += '</tr>';
            }
            document.getElementById('calendar').innerHTML = calendarTable;
        }

        function selectDate(date) {
            document.getElementById('date-display').textContent = date;
            displayTasks(date);
        }

        function addTask(event) {
            if (event.key === "Enter") {
                let taskInput = document.getElementById('new-task');
                if (taskInput.value.trim() !== "") {
                    let date = document.getElementById('date-display').textContent;
                    if (!tasks[date]) tasks[date] = [];
                    tasks[date].push({ text: taskInput.value, done: false });
                    taskInput.value = "";
                    displayTasks(date);
                }
            }
        }

        function editTask(date, index) {
            let newText = prompt("Edit your task:", tasks[date][index].text);
            if (newText !== null && newText.trim() !== "") {
                tasks[date][index].text = newText;
                displayTasks(date);
            }
        }

        function deleteTask(date, index) {
            tasks[date].splice(index, 1);
            displayTasks(date);
        }

        function displayTasks(date) {
            let taskList = document.getElementById('tasks');
            taskList.innerHTML = ""; // Clear existing tasks
            if (tasks[date]) {
                tasks[date].forEach((task, index) => {
                    let taskElement = document.createElement('li');
                    taskElement.textContent = task.text;
                    let editButton = document.createElement('button');
                    editButton.textContent = "Edit";
                    editButton.onclick = () => editTask(date, index);
                    let deleteButton = document.createElement('button');
                    deleteButton.textContent = "Delete";
                    deleteButton.onclick = () => deleteTask(date, index);
                    taskElement.appendChild(editButton);
                    taskElement.appendChild(deleteButton);
                    taskList.appendChild(taskElement);
                });
            }
        }

        function updateCurrentTime() {
            const now = new Date();
            const formattedTime = now.toISOString().split('T')[0] + ' ' + now.toTimeString().split(' ')[0];
            document.getElementById('current-time').textContent = 'Current Time: ' + formattedTime;
        }

        setInterval(updateCurrentTime, 1000); // Update the time every second

        window.onload = function() {
            generateCalendar();
            updateCurrentTime();
        };
    </script>
</body>
</html>
